- @l = [:pages, :public, :status]

.languages
  = link_to image_tag('nl.png', { :style => 'height: 15px; width: 25px;' }), status_path(:token => @token.token, :l => 'nl'), { :style => 'margin: 10px; float:left; '}
  = link_to image_tag('gb.png', { :style => 'height: 15px; width: 25px;' }), status_path(:token => @token.token, :l => 'en'), { :style => 'margin: 10px; margin-left: 0px; float:left;'}


- if flash[:errors]
  .col-md-12.no-margin
    .alert.alert-danger
      %span #{I18n.t('activerecord.errors.default')};
      %ul
      - flash[:errors].each do |_, msg|
        %li= msg.first

.col-md-12
  %h2
    = I18n.t :hi, scope: @l
    %span #{@member.first_name},


  %p= raw I18n.t :description, scope: @l, url: mail_to('bestuur@svsticky.nl')


= form_for :member, :url => status_path(:token => @token.token), :class => 'form-validation', :remote => true, :authenticity_token => true do |f|

  .col-md-12.studies

    - @member.educations.each do |education|
      = f.fields_for 'educations_attributes[]', education do |fs|
        .form-group

          - if education.study.present?
            = fs.hidden_field :id, :class => 'id'

            .col-md-6.bottom-border
              = I18n.t(education.study.code.downcase, scope: 'activerecord.attributes.study.names')

          - else
            .col-md-6.no-padding
              .ui-select
                = fs.select :study_id, options_for_select(Study.where( :active => true ).map{|s| [ I18n.t(s.code.downcase, scope: 'activerecord.attributes.study.names'), s.id]}, education.study_id), :include_blank => ''

          .col-md-6
            .ui-select
              = fs.select :status, options_for_select(Education.statuses.map{ |name, id| [I18n.t(name, scope: 'activerecord.attributes.education.status'), name]}, education.status), :include_blank => education.study.blank?

  .col-md-12.consent
    %h2= raw I18n.t :store_info, scope: @l
    %p= raw I18n.t :store_description, scope: @l, url: mail_to('bestuur@svsticky.nl')

    %br

    .form-group
      %dt= I18n.t :yearly, scope: @l
      %dd
        %label.ui-checkbox
          = check_box_tag 'yearly'
          %span= I18n.t :yearly_consent, scope: @l

      %dt= raw I18n.t :indefinite, scope: @l, url: link_to('koala', users_edit_url)
      %dd
        %label.ui-checkbox
          = check_box_tag 'indefinite'
          %span= I18n.t :indefinite_consent, scope: @l


  .col-md-12.buttons
    %button.btn.btn-success{type: 'submit'}= I18n.t :save, scope: @l

    %p= I18n.t :save_note, scope: @l


  .col-md-12
    %h2= raw I18n.t :remove_info, scope: @l
    %p= I18n.t :remove_description, scope: @l

    - if @member.destroyable?
      .panel.panel-warning
        %button.btn.btn-danger{formaction: status_destroy_url(token: params[:token]), type: 'submit', onclick: "return confirm('#{I18n.t :warning, scope: @l}');"}= I18n.t :destroy, scope: @l
        %p= I18n.t :destroyable, scope: @l
    - else
      %p= raw I18n.t :not_destroyable, scope: @l, url: link_to('koala', users_edit_url)
